<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Menu</title>
  <style>
    :root{
      --bg:#e2e8f0;
      --panel:#ffffff;
      --border:#cbd5e1;
      --ink:#0f172a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--ink);
      height:100vh;
      overflow:hidden;
      display:flex
    }
    aside{
      width:240px;
      background:var(--panel);
      border-right:1px solid var(--border);
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .title{
      font-weight:800;
      letter-spacing:.2px;
      font-size:16px;
      padding:8px 10px;
      border:1px solid var(--border);
      border-radius:12px;
      background:#f8fafc;
    }
    .btns{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    button{
      appearance:none;
      border:1px solid var(--border);
      background:#fff;
      border-radius:12px;
      padding:10px 12px;
      font-weight:700;
      cursor:pointer;
      text-align:left;
      transition:transform .05s ease, box-shadow .15s ease, border-color .15s ease;
      box-shadow:0 1px 0 rgba(0,0,0,.03);
      display:flex;
      align-items:center;
      gap:10px;
    }
    button:active{transform:translateY(1px)}
    button:hover{border-color:#94a3b8}
    button[aria-current="true"]{
      border-color:#334155;
      box-shadow:0 4px 14px rgba(15,23,42,.10);
    }
    .dot{
      width:12px;height:12px;border-radius:999px;flex:0 0 auto;
      border:1px solid rgba(0,0,0,.15);
    }
    .spacer{flex:1}
    main{flex:1; padding:0; }
    iframe{
      width:100%;
      height:100%;
      border:0;
      background:#fff;
    }
  </style>
</head>
<body>
  <aside>
    <div class="title">Menu</div>

    <div id="btns" class="btns"></div>

    <div class="spacer"></div>
  </aside>

  <main>
    <iframe id="frame" title="Outil"></iframe>
  </main>

  <script>
    // Liste des pages à charger (les espaces dans les noms sont encodés en %20)
    const pages = [
      { id: "cache",  label: "Cache-cache",                 src: "cache%20cache.html",               color: "#ef4444" },
      { id: "barre",  label: "Cache-cache barre",           src: "cache%20cache%20barre.html",       color: "#f97316" },
      { id: "gen1",   label: "Lecture 0–100 (Générateur)",   src: "lecture_0_100_generateur.html",    color: "#2563eb" },
      { id: "gen2",   label: "Lecture 0–100 (Générateur 2)", src: "lecture_0_100_generateur2.html",   color: "#16a34a" },
    ];

    const btns = document.getElementById("btns");
    const frame = document.getElementById("frame");

    function setActive(id){
      const p = pages.find(x => x.id === id) || pages[0];
      [...btns.querySelectorAll("button")].forEach(b => {
        const active = b.dataset.id === p.id;
        b.setAttribute("aria-current", active ? "true" : "false");
      });
      frame.src = p.src;
      location.hash = p.id;
      document.title = "Menu";
    }

    // Génère les boutons
    pages.forEach(p => {
      const b = document.createElement("button");
      b.type = "button";
      b.dataset.id = p.id;
      b.innerHTML = `<span class="dot" style="background:${p.color}"></span><span>${p.label}</span>`;
      b.addEventListener("click", () => setActive(p.id));
      btns.appendChild(b);
    });

    // Démarrage (hash optionnel)
    const fromHash = (location.hash || "").replace("#","").trim();
    setActive(pages.some(p => p.id === fromHash) ? fromHash : pages[0].id);

    window.addEventListener("hashchange", () => {
      const h = (location.hash || "").replace("#","").trim();
      if (pages.some(p => p.id === h)) setActive(h);
    });
  </script>
</body>
</html>
