<!doctype html><html lang="fr"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Glisse-nombre</title><link rel="stylesheet" href="../assets/style.css"/></head>
<body>
<header><div class="wrapper"><nav class="nav">
  <a class="brand" href="../">Maths</a>
  <a href="../outils/">Outils</a>
  <a href="../6e/">6e</a>
  <a href="../5e/">5e</a>
  <a href="../4e/">4e</a>
  <a href="../3e/">3e</a>
  <a href="../clubmat/">Clubmat</a>
</nav></div></header>

<main><div class="wrapper">
  <div class="card">
    <h1>Glisse-nombre</h1>
    <p>Multiplie ou divise par 10, 100, 1000 en déplaçant la virgule (sans erreurs d’arrondi).</p>
    <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
      <div><label for="in">Nombre</label><input id="in" type="text" inputmode="decimal" placeholder="ex. 3,5 ou 3.5"/></div>
      <div><label for="op">Opération</label>
        <select id="op">
          <option value="1">×10</option><option value="2">×100</option><option value="3">×1000</option>
          <option value="-1">÷10</option><option value="-2">÷100</option><option value="-3">÷1000</option>
        </select></div>
    </div>
    <div class="row mt"><button id="go">Calculer</button><button id="clr" type="button">Effacer</button></div>
    <p id="out" class="result mt"></p><p id="exp" class="small"></p>
    <hr class="mt"/>
    <div class="row">
      <button class="btn-chip ex" data-v="3,5" data-s="1">3,5 × 10</button>
      <button class="btn-chip ex" data-v="0,062" data-s="3">0,062 × 1000</button>
      <button class="btn-chip ex" data-v="-12,03" data-s="-2">−12,03 ÷ 100</button>
    </div>
  </div>
</div></main>
<footer><div class='wrapper'>© 2025 — Site pédagogique</div></footer>
<script>
function norm(s){s=(s||'').trim().replace(/\s+/g,'').replace(',','.');if(!/^[-+]?\d*(?:\.\d*)?$/.test(s)||s===''||s==='+'||s==='-')return null;
let sign='';if(s[0]==='-'||s[0]==='+'){sign=s[0]==='-'?'-':'';s=s.slice(1);}if(s===''||s==='.')s='0';if(s.startsWith('.'))s='0'+s;
let parts=s.split('.');let i=parts[0];let f=(parts[1]||'');i=i.replace(/^0+(?=\d)/,'');f=f.replace(/0+$/,'');return f.length?sign+(i===''?'0':i)+'.'+f:sign+(i===''?'0':i);}
function shift(x,k){let sign='';if(x.startsWith('-')){sign='-';x=x.slice(1);}let parts=x.split('.');let i=parts[0];let f=(parts[1]||'');let d=i+f;let idx=i.length+k;
if(idx<=0)return sign+'0.'+'0'.repeat(-idx)+(d.replace(/^0+/,'')||'0');if(idx>=d.length)return sign+d+'0'.repeat(idx-d.length);
let L=d.slice(0,idx),R=d.slice(idx);let r=sign+L+(R?'.'+R:'');if(r.includes('.'))r=r.replace(/\.?0+$/,'').replace(/^(-?)\./,'$10.');
return r.replace(/^-?0+(?=\d)/,function(m){return m.startsWith('-')?'-':''});}
function fmtFr(x){return x.replace('.',',');}
const IN=document.getElementById('in'), OP=document.getElementById('op'), OUT=document.getElementById('out'), EXP=document.getElementById('exp');
function explain(k){var s=k>0?'droite':'gauche'; var n=Math.abs(k); var w=n===1?'un rang':(n===2?'deux rangs':'trois rangs'); var facteur=Math.pow(10,n);
return (k>0)?('On multiplie par '+facteur+' ⇒ décaler la virgule de '+w+' vers la '+s+'.'):('On divise par '+facteur+' ⇒ décaler la virgule de '+w+' vers la '+s+'.');}
function run(){const v=norm(IN.value); if(v===null){OUT.textContent='⚠️ Nombre invalide'; EXP.textContent=''; return;}
const k=parseInt(OP.value,10); const r=shift(v,k); OUT.textContent=fmtFr(r); EXP.textContent=explain(k);}
document.getElementById('go').addEventListener('click',run);
document.getElementById('clr').addEventListener('click',function(){IN.value='';OUT.textContent='';EXP.textContent='';});
document.querySelectorAll('.ex').forEach(function(b){b.addEventListener('click',function(){IN.value=b.dataset.v;OP.value=b.dataset.s;run();});});
</script>
</body></html>
